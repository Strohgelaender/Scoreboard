"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.StreamDeckMiniV2 = void 0;
const util_1 = require("../util");
const base_1 = require("./base");
const id_1 = require("./id");
const miniV2Properties = {
    MODEL: id_1.DeviceModelId.MINI,
    COLUMNS: 3,
    ROWS: 2,
    ICON_SIZE: 80,
    KEY_DIRECTION: 'ltr',
    KEY_DATA_OFFSET: 1,
};
class StreamDeckMiniV2 extends base_1.StreamDeckBase {
    constructor(deviceInfo, options) {
        super(deviceInfo, options, miniV2Properties);
    }
    transformKeyIndex(keyIndex) {
        return keyIndex;
    }
    convertFillImage(sourceBuffer, sourceOptions) {
        const byteBuffer = util_1.imageToByteArray(sourceBuffer, sourceOptions, util_1.BMP_HEADER_LENGTH, this.rotateCoordinates.bind(this), 'bgr', this.ICON_SIZE);
        util_1.writeBMPHeader(byteBuffer, this.ICON_SIZE, this.ICON_BYTES, 2835);
        return byteBuffer;
    }
    getFillImagePacketLength() {
        return 1024;
    }
    rotateCoordinates(x, y) {
        return { x: this.ICON_SIZE - y - 1, y: x };
    }
    getSerialNumber() {
        return util_1.numberArrayToString(this.getFeatureReport(3, 32).slice(5, 17));
    }
}
exports.StreamDeckMiniV2 = StreamDeckMiniV2;
//# sourceMappingURL=miniv2.js.map